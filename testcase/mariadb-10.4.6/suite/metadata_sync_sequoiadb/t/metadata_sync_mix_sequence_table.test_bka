##BUG #SEQUOIASQLMAINSTREAM-826
##case 22948
#
#--source include/have_sequoiadb.inc
#--source suite/metadata_sync_sequoiadb/inc/insts_connect_sequoiadb.inc
#
## connect to conn1, clear databases in the beginning
#connection conn1;
#--disable_warnings
#DROP DATABASE IF EXISTS metaSync_mix_seq_table;
#--enable_warnings
#
## connect to conn2, check databases are cleaned in the beginning
#connection conn2;
#--sleep $sleep
#--error ER_BAD_DB_ERROR
#SHOW CREATE DATABASE metaSync_mix_seq_table;
#
## seqDB-22948
## begin testing
##
## create sequence and table
#connection conn1;
#CREATE DATABASE metaSync_mix_seq_table;
#USE metaSync_mix_seq_table;
#CREATE SEQUENCE IF NOT EXISTS seq1 ENGINE InnoDB MAX_ROWS 10 MIN_ROWS 1 ROW_FORMAT = REDUNDANT SEQUENCE = 1 COMMENT 'create sequence';
#CREATE TABLE t1 ( id INT PRIMARY KEY ) ENGINE InnoDB;
#INSERT INTO t1 VALUES ( NEXTVAL( seq1 ) );
#INSERT INTO t1 VALUES ( NEXTVAL( seq1 ) );
## check metadatas after create
#connection conn2;
#--sleep $sleep
#USE metaSync_mix_seq_table;
#SHOW CREATE TABLE seq1;
#SELECT * FROM seq1;
#SELECT * FROM t1 ORDER BY id;
#SELECT PREVIOUS VALUE FOR seq1;
#SELECT NEXT VALUE FOR seq1;
## alter sequence and table
#ALTER SEQUENCE seq1 START = 15 RESTART MINVALUE = 10 MAXVALUE = 20 CYCLE;
#ALTER TABLE t1 CHANGE id id1 BIGINT;
#INSERT INTO t1 VALUES ( NEXTVAL( seq1 ));
#INSERT INTO t1 VALUES ( NEXTVAL( seq1 ));
## check metadatas after alter
#connection conn1;
#--sleep $sleep
#SELECT * FROM seq1;
#SELECT * FROM t1 ORDER BY id1;
#SELECT NEXT VALUE FOR seq1;
## drop sequence and table
#DROP SEQUENCE /* drop sequence */ seq1;
#DROP TABLE t1;
## check metadatas after drop
#connection conn2;
#--sleep $sleep
#--error ER_NO_SUCH_TABLE
#SHOW CREATE TABLE seq1;
#--error ER_NO_SUCH_TABLE
#SHOW CREATE TABLE t1;
#
## clear databases in the ending
#connection conn1;
#DROP DATABASE metaSync_mix_seq_table;
## check databases are cleaned in the ending
#connection conn2;
#--sleep $sleep
#--error ER_BAD_DB_ERROR
#SHOW CREATE DATABASE metaSync_mix_seq_table;
#
#--source include/uninstall_sequoiadb.inc
#--source suite/metadata_sync_sequoiadb/inc/insts_disconnect_sequoiadb.inc
